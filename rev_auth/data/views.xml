<?xml version="1.0"?>
<rev>

	<View id="rev_auth_navbar" modify="rev_app.app_navbar">
		
		<!-- Add User Menu -->
		<modify xpath="//ul[@name='navbar_right']" action="insert_inside" position="0">
		
	        <li ng-controller="UserMenuController" ng-class="{dropdown: isLoggedIn}" ng-attr-dropdown="isLoggedIn">
	        
		        <a href="#/login" ng-if="!isLoggedIn">
					<span class="glyphicon glyphicon-user" style="margin-right:5px;"></span> Sign In
				</a>
				
				<a href="#" ng-if="isLoggedIn" class="dropdown-toggle" dropdown-toggle="true" role="button">
					<span class="glyphicon glyphicon-user" style="margin-right:5px;"></span> {{ user.name }}
					<span class="caret"></span>
				</a>
				<ul class="dropdown-menu" ng-if="isLoggedIn" role="menu" name="user_menu">
					<li><a href="#/preferences" name="preferences_link">Preferences</a></li>
					<li class="divider"></li>
					<li><a href="#/logout" name="logout_link">Sign Out</a></li>
				</ul>
			</li>
			
        </modify>
		
	</View>

	<View id="login" name="Sign In Form">
		
		<div class="row" ng-controller="LoginFormController">
			<div class="col-md-3"></div>

			<div class="col-md-6">
			
				<div class="panel panel-primary drop-shadow" style="margin-top:30px;" ng-controller="LoginFormController">
					<div class="panel-heading">
						<span style="font-size:2em;">Please sign in</span>
					</div>
					<div class="panel-body">
						<form novalidate="" name="loginForm" class="form-horizontal">
						
							<field name="blah" />
						
							<div class="form-group" ng-class="{'has-error': loginForm.user_email.$invalid &amp;&amp; (loginForm.user_email.$touched || loginForm.$submitted)}">
								<label for="user_email" class="col-sm-3 control-label">E-mail</label>
								<div class="col-sm-9">
									<input type="email" required="" name="user_email" ng-model="user.email"
										class="form-control" placeholder="E-mail Address"
										ng-disabled="loading" />
									<div ng-show="loginForm.$submitted || loginForm.user_email.$touched" style="margin-top:5px;">
										<p class="text-danger" ng-show="loginForm.user_email.$error.required">Please enter your e-mail address</p>
										<p class="text-danger" ng-show="loginForm.user_email.$error.email">Please enter a valid e-mail address</p>
									</div>
								</div>
							</div>
							
							<div class="form-group" ng-class="{'has-error': loginForm.user_password.$invalid &amp;&amp; (loginForm.user_password.$touched || loginForm.$submitted)}">
								<label for="user_password" class="col-sm-3 control-label">Password</label>
								<div class="col-sm-9">
									<input type="password" required="" name="user_password" ng-model="user.password"
										class="form-control" placeholder="Password"
										ng-disabled="loading" />
									<div ng-show="loginForm.$submitted || loginForm.user_password.$touched" style="margin-top:5px;">
										<p class="text-danger" ng-show="loginForm.user_password.$error.required">Please enter your password</p>
									</div>
								</div>
							</div>
							
							<div class="form-group">
								<div class="col-sm-offset-3 col-sm-9">
									<div class="checkbox">
										<label><input type="checkbox" name="remember_email" ng-model="user.remember_me"
											ng-disabled="loading" /> Remember my e-mail address</label>
									</div>
								</div>
							</div>
							
							<div class="form-group">
								<div class="col-sm-offset-3 col-sm-9">
									<button type="submit" class="btn btn-primary"
										ng-click="doLogin()"
										ng-disabled="loading">
											Sign in
									</button>
									<img src="static/img/spinner.gif" ng-show="loading" />
								</div>
							</div>
						</form>
						
					</div>
				</div>
			
			</div>

			<div class="col-md-3"></div>
		</div>
		
	</View>

	<View id="logout" name="Logout Screen">
		
		<div class="row" ng-controller="LogoutController">
			<div class="col-md-12">
				<h1>@{{app.name}}</h1>
				
				<p>You have been logged out.</p>
			</div>
		</div>
		
	</View>

</rev>
